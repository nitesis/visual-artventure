<!DOCTYPE html>
<html>
  <head>
    <style>
      html, body, #map {
        height: 100%;
        padding: 0;
        margin: 0;
      }
      div.cartodb-popup.v2.header.with-image, div.cartodb-popup-header .cover {
        height: 50%;
      }
      div.cartodb-popup.v2.header a.cartodb-popup-close-button:after, div.cartodb-popup.v2.header a.cartodb-popup-close-button:before {
        background: #e41586 !important;
      }

    .leaflet-container img {
        width: 300px;
    }
   
    </style>
  </head>
  
  <body>
    <link rel="stylesheet" href="http://libs.cartocdn.com/cartodb.js/v3/3.15/themes/css/cartodb.css" />

    <div id="map"></div>

    <script src="http://libs.cartocdn.com/cartodb.js/v3/3.15/cartodb.js"></script>
    <script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>
    <script>
    var imageReitschuleBern = ["23500S1.jpg", "23500S1.jpg", "77664DIV1.jpg", "77818S1.jpg", "77687DIV1.jpg"];
    var imagesKunstalleBern = ["77835DIV1.jpg", "77664DIV1.jpg", "77664DIV1.jpg", "78879S1.jpg", "78879S1.jpg"];
    var imagesKunstmuseumBern = ["90743DS2.jpg", "90743DS5.jpg", "90743DS13.jpg", "90743DS2.jpg", "90743DS5.jpg"];
	var imagesKornfeldUndKlipstein = ["23500S1.jpg", "23500S1.jpg", "77880DIV1.jpg", "77880DIV1.jpg", "77828S1.jpg"];
    var imagesGalerieMartinKrebs = ["80128DIV1.jpg", "79424DIV1.jpg", "79497S1.jpg", "79698S1.jpg", "80100S1.jpg"];
	var imagesBernischesHistorischesMuseum = ["90779D1.jpg", "90785D1.jpg", "90756D1.jpg", "82489DS1.jpg", "90760D1.jpg"];
    var imagesSchweizerischesAlpinesMuseum = ["453S1.jpg", "80990CE1.jpg", "80993CE1.jpg", "80994CE1.jpg", "80988CE1.jpg"];
    var imagesMuseeCantonalDesBeauxArts = ["97282D1.jpg", "97288D1.jpg", "97292D1.jpg", "97290D1.jpg", "97281D1.jpg"];
    var imagesKunsthausZuerich = ["54651DS1.jpg", "75870E2.jpg", "19729S1.jpg", "75681E1.jpg", "76255E1.jpg"];
    var imagesKunstmuseumLuzern = ["77880DIV1.jpg", "77699DIV1.jpg", "77828S1.jpg", "80144S1.jpg", "77819S1.jpg"];
	
	var imagesKleineOrangerieElfenau = ["90743DS13.jpg", "90743DS13.jpg", "90743DS13.jpg", "90743DS13.jpg", "90743DS13.jpg"];

	

    
    var index = 0;

    function carousel() {
      var infoWindow = document.getElementsByClassName("cartodb-infowindow")[0];

      if (infoWindow.style.display == "none" ||infoWindow.style.visibility == "hidden") {
        console.log("nicht sichtbar");
      } else {
        console.log("sichtbar");
        var image = document.getElementById("mySlides");
        var name = document.getElementById("nameGalerie").innerHTML;
        var cover = (document.getElementsByClassName("cover")[0]);
        var textWrapper = (document.getElementsByClassName("cartodb-popup-content-wrapper")[0]);
        textWrapper.style.height = "100px";
        cover.style.height = "100%";
        image.style.display = "inline";
        console.log(image);
        //console.log(name);

        if (name == "Reitschule Bern") {
          image.src = "http://www.sikart.ch/abb373/"+imageReitschuleBern[index];
        } else if (name == "Kunsthalle Bern") {
          console.log(name);
          image.src = "http://www.sikart.ch/abb373/"+imagesKunstalleBern[index];
        } else if (name == "Kunstmuseum Bern") {
          console.log(name);
          image.src = "http://www.sikart.ch/abb373/"+imagesKunstmuseumBern[index];
        } else if (name == "Kornfeld und Klipstein") {
          console.log(name);
          image.src = "http://www.sikart.ch/abb373/"+imagesKornfeldUndKlipstein[index];
        } else if (name == "Galerie Martin Krebs") {
          console.log(name);
          image.src = "http://www.sikart.ch/abb373/"+imagesGalerieMartinKrebs[index];
        } else if (name == "Bernisches Historisches Museum") {
          console.log(name);
          image.src = "http://www.sikart.ch/abb373/"+imagesBernischesHistorischesMuseum[index];
        } else if (name == "Kleine Orangerie Elfenau\n") {
          console.log(name);
          image.src = "http://www.sikart.ch/abb373/"+imagesKleineOrangerieElfenau[index];
        } else if (name == "Schweizerisches Alpines Museum") {
          console.log(name);
          image.src = "http://www.sikart.ch/abb373/"+imagesSchweizerischesAlpinesMuseum[index];
        } else if (name == "Musee Cantonal des Beaux-Arts") {
          console.log(name);
          image.src = "http://www.sikart.ch/abb373/"+imagesMuseeCantonalDesBeauxArts[index];
        } else if (name == "Kunsthaus Zuerich") {
          console.log(name);
          image.src = "http://www.sikart.ch/abb373/"+imagesKunsthausZuerich[index];
        } else if (name == "Kunstmuseum Luzern") { 
          console.log(name);        
          image.src = "http://www.sikart.ch/abb373/"+imagesKunstmuseumLuzern[index];
        }else {
          //
        }

        index++;
        if (index % imageReitschuleBern.length == 0) {
          index = 0;
        }
      }
      setTimeout(carousel, 2000);
    }

    function asdf() {
      var image = document.getElementById("mySlides");
      image.style.display = "inline";
      carousel();
    }

    window.onload = function() {
        cartodb.createVis('map', 
        'https://sslimon.cartodb.com/api/v2/viz/48ed3992-f63b-40aa-95ca-204f388c4101/viz.json', {
          infowindow: true
        }, asdf);
    }
    

    // order1 ist name von infoscreen
    // mySlides ist img
    // div.cartodb-infowindow muss visibiltiy visible sein und nicht hidden.
    
    </script>

  </body>
</html> 



